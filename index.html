<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>GeoAsset Dashboard</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "primary": "#3b82f6",
                        "background": "#f8fafc", // slate-50
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                },
            },
        }
    </script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha26-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
        body {
            --checkbox-tick-svg: url('data:image/svg+xml,%3csvg viewBox=%270 0 16 16%27 fill=%27rgb(255, 255, 255)%27 xmlns=%27http://www.w3.org/2000/svg%27%3e%3cpath d=%27M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z%27/%3e%3c/svg%3e');
            font-family: 'Inter', sans-serif;
        }
        #root, body {
            height: 100vh;
            width: 100vw;
            overflow: hidden;
        }
        /* Custom Scrollbar Styles */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e2e8f0; /* slate-200 */
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8; /* slate-400 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b; /* slate-500 */
        }
        .leaflet-container {
            height: 100%;
            width: 100%;
            background-color: #e2e8f0; /* slate-200 */
        }
        .leaflet-control-zoom {
            border: 1px solid #cbd5e1 !important; /* slate-300 */
        }
        .leaflet-control-zoom-in, .leaflet-control-zoom-out {
            background-color: rgb(255 255 255 / 0.8) !important; /* white/80 */
            color: #1e293b !important; /* slate-800 */
            border: none !important;
            backdrop-filter: blur(4px);
        }
         .leaflet-control-zoom-in {
            border-top-left-radius: 0.5rem !important;
            border-top-right-radius: 0.5rem !important;
            border-bottom: 1px solid #e2e8f0 !important; /* slate-200 */
        }
        .leaflet-control-zoom-out {
            border-bottom-left-radius: 0.5rem !important;
            border-bottom-right-radius: 0.5rem !important;
        }
        .leaflet-control-zoom-in:hover, .leaflet-control-zoom-out:hover {
            background-color: rgb(248 250 252 / 0.8) !important; /* slate-50/80 */
        }
        .leaflet-control-attribution {
            display: none;
        }
        .leaflet-bar a.leaflet-disabled {
            background-color: rgb(255 255 255 / 0.6) !important;
            color: #94a3b8 !important; /* slate-400 */
        }
        /* Custom Leaflet Popup Styles */
        .custom-leaflet-popup .leaflet-popup-content-wrapper {
            background-color: rgb(248 250 252 / 0.92); /* slate-50 with opacity for a bright, clean look */
            backdrop-filter: blur(10px);
            color: #0f172a; /* slate-900 for dark, high-contrast text */
            border: none;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 30px -5px rgba(15, 23, 42, 0.1), 0 0 0 1px rgba(15, 23, 42, 0.05);
            padding: 1rem;
        }
        .custom-leaflet-popup .leaflet-popup-content {
            margin: 0;
            width: 100% !important;
            line-height: 1.5;
            font-size: 14px; /* Increased for readability */
        }
        .custom-leaflet-popup .leaflet-popup-tip {
             background: rgb(248 250 252 / 0.92); /* Match the new background */
        }
        .custom-leaflet-popup a.leaflet-popup-close-button {
            color: #64748b !important; /* slate-500 */
            padding: 8px 8px 0 0;
        }
        .custom-leaflet-popup a.leaflet-popup-close-button:hover {
            color: #0f172a !important;
        }
        .custom-leaflet-popup .text-green-500 { color: #16a34a; } /* Darker green for better contrast */
        .custom-leaflet-popup .text-yellow-500 { color: #d97706; } /* Darker amber for better contrast */
        .custom-leaflet-popup .text-slate-500 { color: #475569 !important; } /* Darker label color: slate-600 */
        .custom-leaflet-popup h3 { color: #0f172a !important; } /* slate-900 */
        .custom-leaflet-popup .border-slate-300 { border-color: #d1d5db; }

        /* Measurement Tooltip Styles */
        .measure-tooltip {
            background-color: rgba(255, 255, 255, 0.85) !important;
            backdrop-filter: blur(8px) !important;
            border: 1px solid #3b82f6 !important; /* primary */
            color: #1e293b !important; /* slate-800 */
            border-radius: 0.5rem !important;
            padding: 1.125rem 1rem !important; /* Taller, portrait-style padding */
            box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
            font-family: 'Inter', sans-serif !important;
            font-size: 14px !important;
            white-space: pre-wrap !important;
            transition: opacity 0.2s ease-in-out;
        }
        .measure-tooltip .measure-value {
            font-weight: 700;
            font-size: 1.2em;
            color: #0891b2; /* cyan-600 */
        }
        .measure-tooltip .measure-separator {
            border: 0;
            border-top: 1px solid #e2e8f0; /* slate-200 */
            margin: 8px 0;
        }
        .measure-tooltip .measure-instructions {
            display: block;
            font-size: 0.85em;
            color: #475569; /* slate-600 */
            margin-top: 4px;
            line-height: 1.5;
        }
        .measure-tooltip .measure-instructions strong {
            color: #0f172a; /* slate-900 */
            font-weight: 600;
        }
        .measure-result-tooltip {
            background-color: #3b82f6 !important; /* primary */
            color: white !important;
            border: 1px solid rgba(0,0,0,0.1) !important;
            border-radius: 0.375rem !important;
            padding: 0.25rem 0.6rem !important;
            font-size: 13px !important;
            font-weight: 600 !important;
            box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4) !important;
        }
        .north-arrow-selector {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.5rem;
            padding: 0.5rem;
        }
        .north-arrow-selector-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.75rem; /* 44px */
            height: 2.75rem; /* 44px */
            border-radius: 0.5rem; /* rounded-lg */
            transition: background-color 0.2s, color 0.2s;
            cursor: pointer;
        }
        .north-arrow-selector-btn.active {
            background-color: #3b82f6; /* bg-primary */
            color: white;
        }
        .north-arrow-selector-btn:not(.active) {
            background-color: #f1f5f9; /* bg-slate-100 */
            color: #475569; /* text-slate-600 */
        }
         .north-arrow-selector-btn:not(.active):hover {
            background-color: #e2e8f0; /* bg-slate-200 */
        }
    </style>
     <script type="importmap">
    {
      "imports": {
        "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
        "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0",
        "react/": "https://aistudiocdn.com/react@^19.2.0/",
        "react": "https://aistudiocdn.com/react@^19.2.0",
        "leaflet": "https://aistudiocdn.com/leaflet@^1.9.4",
        "react-leaflet": "https://aistudiocdn.com/react-leaflet@^5.0.0",
        "geojson": "https://aistudiocdn.com/geojson@^0.5.0",
        "leaflet/": "https://aistudiocdn.com/leaflet@^1.9.4/",
        "@turf/turf": "https://aistudiocdn.com/@turf/turf@^7.2.0"
      }
    }
    </script>
</head>
<body class="bg-background font-display text-slate-700">
<div id="root"></div>
<script type="module">
  // Add a cache-busting query parameter to ensure the latest code is loaded.
  const script = document.createElement('script');
  script.type = 'module';
  script.src = `/index.tsx?v=${Date.now()}`;
  document.body.appendChild(script);
</script>
</body>
</html>